<!DOCTYPE html>
<html lang="tr">
<!-- lol -->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒ∞hsans Gate - Survival Mod</title>
    <meta name="description" content="ƒ∞ngilizce kelime daƒüarcƒ±ƒüƒ±nƒ±zƒ± geli≈ütirin.">
    <link rel="stylesheet" href="css/style.css?v=4">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <header class="main-header">
            <div class="header-left">
                <div class="user-profile">
                    <span class="user-name" id="display-user-name">Misafir</span>
                    <button class="btn-icon" onclick="app.logout()" title="√áƒ±kƒ±≈ü Yap" style="display: none;">üö™</button>
                    <button class="btn-icon" onclick="app.checkAdminAuth()" title="Y√∂netici Paneli"
                        style="display: none;">üë§</button>
                </div>
                <!-- Controls moved next to profile -->
                <div class="audio-controls">
                    <button id="btn-music" class="btn-music" onclick="app.toggleMusic()" title="M√ºziƒüi A√ß/Kapat">
                        üéµ
                    </button>
                </div>
            </div>

            <div class="header-right-container">
                <div class="logo">
                    <span class="logo-icon">üî•</span>
                    <h1>ƒ∞hsans<span class="highlight">Gate</span></h1>
                </div>
                <div class="wallet-display">
                    <span id="wallet-amount">0</span> üíé
                </div>
            </div>
        </header>

        <main id="app-content">

            <!-- LANDING VIEW -->
            <div id="view-landing" class="view active">
                <div class="landing-container">
                    <div class="landing-logo">
                        <span class="logo-icon-lg">üî•</span>
                        <h1>ƒ∞hsans<span class="highlight">Gate</span></h1>
                        <p class="subtitle">Kelime avƒ±na hazƒ±r mƒ±sƒ±n?</p>
                    </div>

                    <div class="landing-form">
                        <!-- Login Choice Buttons -->
                        <div id="login-choices" class="login-choices">
                            <button class="btn btn-primary btn-large" onclick="app.showUserLogin()">
                                üë§ Kullanƒ±cƒ± Giri≈üi
                            </button>
                            <button class="btn btn-secondary btn-large" style="margin-top: 1rem;"
                                onclick="app.checkAdminAuth()">
                                üõ°Ô∏è Y√∂netici Giri≈üi
                            </button>
                        </div>

                        <!-- User Name Input (Hidden by default, shown after User Login click) -->
                        <div id="user-login-form" class="hidden">
                            <input type="text" id="landing-player-name" class="landing-input"
                                placeholder="Adƒ±nƒ± yaz...">
                            <div style="display: flex; gap: 0.5rem; justify-content: center; margin-top: 1rem;">
                                <button class="btn btn-secondary" onclick="app.cancelUserLogin()">Geri</button>
                                <button class="btn btn-primary" onclick="app.enterDashboard()">Ba≈üla &rarr;</button>
                            </div>
                        </div>
                    </div>

                    <!-- Removed old explicit admin link, now integrated above -->
                </div>
            </div>

            <!-- DASHBOARD VIEW (Main Hub) -->
            <div id="view-dashboard" class="view hidden">
                <div class="dashboard-hub">

                    <!-- WELCOME SECTION -->
                    <div class="hub-header">
                        <div class="hub-welcome">
                            <h3>üëã Ho≈ü geldin, <span id="display-user-name">Oyuncu</span></h3>
                            <p class="quote-day">"Her yeni kelime, yeni bir d√ºnyadƒ±r."</p>
                        </div>
                        <div class="daily-mission">
                            <span class="mission-icon">üéØ</span>
                            <div class="mission-info">
                                <h4>G√ºn√ºn G√∂revi</h4>
                                <p>G√ºnl√ºk 500 Elmas kazan!</p>
                                <div class="mission-progress">
                                    <div class="bar" style="width: 30%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- MAIN CONTENT GRID -->
                    <div class="dashboard-content">
                        <!-- Left: Main Modules -->
                        <div class="modules-grid">
                            <!-- Word Study -->
                            <div class="module-card hero" onclick="app.openModeSelection()">
                                <div class="icon-box">üìö</div>
                                <div class="module-info">
                                    <h4>Kelime √áalƒ±≈ümasƒ±</h4>
                                    <p>Kelime hazineni geli≈ütir.</p>
                                </div>
                                <div class="hover-glow"></div>
                            </div>

                            <!-- Grammar (Locked) -->
                            <div class="module-card locked">
                                <div class="icon-box">üìù</div>
                                <div class="module-info">
                                    <h4>Dil Bilgisi</h4>
                                    <p>Yakƒ±nda</p>
                                </div>
                                <span class="lock-icon">üîí</span>
                            </div>

                            <!-- Reading (Locked) -->
                            <div class="module-card locked">
                                <div class="icon-box">üìñ</div>
                                <div class="module-info">
                                    <h4>Okuma</h4>
                                    <p>Yakƒ±nda</p>
                                </div>
                                <span class="lock-icon">üîí</span>
                            </div>
                        </div>

                        <!-- Right / Bottom: Stats or Quick Actions -->
                        <div class="quick-stats-panel">
                            <div class="stat-item">
                                <span id="dash-fav-count" class="stat-value">‚≠ê 0</span>
                                <span class="stat-label">Favori Kelimeler</span>
                            </div>
                            <div class="stat-item">
                                <span id="dash-high-score" class="stat-value">üèÜ 0</span>
                                <span class="stat-label">En Y√ºksek Skor</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- MODE SELECTION VIEW (Split Page) -->
            <div id="view-modes" class="view hidden" style="padding: 0;">
                <div class="modes-split-layout">
                    <!-- LEFT COLUMN: MODES -->
                    <div class="modes-column">
                        <div class="modes-header-group">
                            <button class="btn-icon back-btn-top" onclick="app.showDashboard()" title="Geri">
                                &larr;
                            </button>
                            <h2>Oyun Modu</h2>
                        </div>
                        <p style="color:var(--text-secondary); margin-bottom:2rem">Meydan okumanƒ± se√ß.</p>

                        <div class="mode-grid-compact">
                            <div class="mode-card compact" onclick="app.startGame('survival')">
                                <div class="mode-icon">üíÄ</div>
                                <div class="mode-info">
                                    <h3>Tek ≈ûans</h3>
                                    <p>Hata yok, sonsuz ko≈üu.</p>
                                </div>
                            </div>
                            <div class="mode-card compact" onclick="app.startGame('rush')">
                                <div class="mode-icon">‚ö°</div>
                                <div class="mode-info">
                                    <h3>Acele Modu</h3>
                                    <p>120 sn, rekor kƒ±r.</p>
                                </div>
                            </div>
                            <div class="mode-card compact" onclick="app.startGame('favorites')">
                                <div class="mode-icon">‚≠ê</div>
                                <div class="mode-info">
                                    <h3>Favoriler</h3>
                                    <p>Kendi kelimelerin.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- RIGHT COLUMN: LEADERBOARD -->
                    <div class="leaderboard-column">
                        <div class="leaderboard-card">
                            <div class="lb-header">
                                <h3>üèÜ Liderlik Tablosu</h3>
                                <span class="badge-rush">Acele Modu</span>
                            </div>

                            <div class="table-wrapper">
                                <table class="lb-table">
                                    <thead>
                                        <tr>
                                            <th>#</th>
                                            <th>Oyuncu</th>
                                            <th>Skor</th>
                                        </tr>
                                    </thead>
                                    <tbody id="leaderboard-body">
                                        <!-- JS Populated -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- NEW: Word List Button -->
                        <button class="btn btn-secondary"
                            style="width:100%; margin-top:1rem; display:flex; justify-content:center; align-items:center; gap:0.5rem;"
                            onclick="app.showWordList()">
                            <span>üìö</span> T√ºm Kelimeler & Favoriler
                        </button>
                    </div>
                </div>
            </div>

            <!-- GAME VIEW -->
            <div id="view-game" class="view hidden">
                <div class="game-header-bar">
                    <button id="btn-music" class="btn-music" onclick="app.toggleMusic()">üéµ</button>
                    <div class="live-score">Skor: <span id="current-score">0</span></div>
                    <div id="game-timer" class="game-timer hidden">02:00</div>
                </div>

                <div id="game-lives" class="game-lives hidden">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>

                <div class="game-card">
                    <div class="card-header">
                        <span id="word-level" class="level-indicator">A1</span>
                        <button id="game-star-btn" class="btn-star" onclick="app.toggleGameFavorite()">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polygon
                                    points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                                </polygon>
                            </svg>
                        </button>
                    </div>

                    <div class="word-display">
                        <h2 id="target-word">Placeholder</h2>
                    </div>

                    <div id="options-container" class="options-grid">
                        <!-- Options Generated by JS -->
                    </div>
                </div>

                <div style="margin-top:1rem; display:flex; justify-content:space-between; align-items:center">
                    <button class="btn btn-text" onclick="app.quitGame()">&larr; Vazge√ß</button>
                    <button id="btn-joker" class="btn-joker" onclick="app.useJoker()">
                        <span>üÉè %50</span>
                        <span class="joker-cost">200 üíé</span>
                    </button>
                </div>
            </div>

            <!-- GAME OVER VIEW -->
            <div id="view-gameover" class="modal-overlay hidden">
                <div class="modal-content">
                    <h3>Oyun Bitti!</h3>

                    <div class="final-score-text">
                        Skorun
                        <span id="final-score">150</span>
                    </div>

                    <div class="earnings-report">
                        Kazanƒ±lan: <span id="earned-wallet" class="highlight">+0</span> üíé
                    </div>

                    <div id="name-input-area" class="name-input-container hidden">
                        <!-- Name input is now handled globally in header or settings ideally, but keeping fallback -->
                    </div>

                    <div style="display:flex; gap:1rem; justify-content:center">
                        <button class="btn btn-secondary" onclick="app.openModeSelection()">Mod Se√ßimi</button>
                        <button class="btn btn-primary" onclick="app.startGame()">Tekrar Oyna ‚Ü∫</button>
                    </div>
                </div>
            </div>

            <!-- WORD LIST VIEW -->
            <div id="view-list" class="view hidden">
                <div class="list-header">
                    <div style="display:flex; align-items:center; gap:1rem; margin-bottom:1rem;">
                        <button class="btn-icon back-btn-top" onclick="app.openModeSelection()" title="Geri">
                            &larr;
                        </button>
                        <h2 style="margin:0; font-size:1.5rem;">Kelimeler</h2>
                    </div>

                    <div class="search-bar">
                        <input type="text" id="search-input" placeholder="Kelime ara..." onkeyup="app.filterList()">
                    </div>
                    <div class="filter-tabs">
                        <button class="filter-tab active" id="filter-all" onclick="app.setListFilter('all')">
                            <span>üìö</span> T√ºm√º <span id="total-word-count"
                                style="font-size:0.8em; opacity:0.7; margin-left:4px">(0)</span>
                        </button>
                        <button class="filter-tab" id="filter-favs" onclick="app.setListFilter('favs')">
                            <span>‚≠ê</span> Favoriler
                        </button>
                    </div>

                    <!-- Level Filters -->
                    <div class="level-filters">
                        <button class="level-chip active" onclick="app.setLevelFilter('all', this)">T√ºm
                            Seviyeler</button>
                        <button class="level-chip" onclick="app.setLevelFilter('A1', this)">A1</button>
                        <button class="level-chip" onclick="app.setLevelFilter('A2', this)">A2</button>
                        <button class="level-chip" onclick="app.setLevelFilter('B1', this)">B1</button>
                        <button class="level-chip" onclick="app.setLevelFilter('B2', this)">B2</button>
                        <button class="level-chip" onclick="app.setLevelFilter('C1', this)">C1</button>
                        <button class="level-chip" onclick="app.setLevelFilter('C2', this)">C2</button>
                    </div>
                </div>
                <div id="word-list-items" class="word-list-container">
                    <!-- Items JS -->
                </div>
                <div class="sticky-back">
                    <button class="btn btn-primary" onclick="app.openModeSelection()">Geri D√∂n</button>
                </div>
            </div>

            <!-- ADMIN VIEW -->
            <div id="view-admin" class="view hidden">
                <h2 style="text-align:center; margin-bottom:2rem; color:var(--accent-gold)">Y√∂netici Paneli</h2>

                <div class="admin-grid">
                    <button class="btn btn-secondary" onclick="app.performShowAddWord()">
                        <span style="font-size:2rem; display:block">üìù</span>
                        Kelime Ekle
                    </button>

                    <button class="btn btn-secondary" onclick="app.resetProgress()">
                        <span style="font-size:2rem; display:block">üóëÔ∏è</span>
                        ƒ∞lerlemeyi Sƒ±fƒ±rla
                    </button>
                </div>

                <div style="margin-top:3rem; text-align:center">
                    <button class="btn btn-text" onclick="app.showLanding()">
                        &larr; √áƒ±kƒ±≈ü Yap
                    </button>
                </div>
            </div>

            <!-- ADD WORD VIEW (Admin Sub-view) -->
            <div id="view-add-word" class="view hidden">
                <h3 style="margin-bottom:1.5rem; text-align:center">Yeni Kelime Ekle (Global)</h3>

                <div class="form-group">
                    <label>ƒ∞ngilizce Kelime</label>
                    <input type="text" id="new-word-en" autocomplete="off">
                </div>

                <div class="form-group">
                    <label>T√ºrk√ße Kar≈üƒ±lƒ±ƒüƒ±</label>
                    <input type="text" id="new-word-tr" autocomplete="off">
                </div>

                <div class="form-group">
                    <label>Seviye</label>
                    <div class="level-select">
                        <button class="lvl-btn active" onclick="app.selectLevel('A1', this)">A1</button>
                        <button class="lvl-btn" onclick="app.selectLevel('A2', this)">A2</button>
                        <button class="lvl-btn" onclick="app.selectLevel('B1', this)">B1</button>
                        <button class="lvl-btn" onclick="app.selectLevel('B2', this)">B2</button>
                        <button class="lvl-btn" onclick="app.selectLevel('C1', this)">C1</button>
                    </div>
                </div>

                <div style="margin-top:2rem; display:flex; gap:1rem">
                    <button class="btn btn-secondary" onclick="app.showAdmin()">ƒ∞ptal</button>
                    <button class="btn btn-primary" onclick="app.saveNewWord()">Kaydet</button>
                </div>
            </div>

            <!-- PASSWORD MODAL -->
            <div id="view-password-modal" class="modal-overlay hidden">
                <div class="modal-content">
                    <p id="password-modal-msg" style="margin-bottom:1rem">Parola:</p>
                    <input type="password" id="reset-password-input" class="password-input"
                        style="width:100%; padding:0.8rem; margin-bottom:1rem; background:rgba(255,255,255,0.1); border:1px solid #555; color:white; text-align:center">
                    <div style="display:flex; gap:1rem; justify-content:center">
                        <button class="btn btn-secondary" onclick="app.closePasswordModal()">ƒ∞ptal</button>
                        <button class="btn btn-primary" onclick="app.submitPassword()">Onayla</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics-compat.js"></script>

    <script src="js/words.js?v=16"></script>
    <script src="js/app.js?v=7"></script>
</body>

</html>