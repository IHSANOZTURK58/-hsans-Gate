<!DOCTYPE html>
<html lang="tr">
<!-- lol -->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ä°hsans Gate - Survival Mod</title>
    <meta name="description" content="Ä°ngilizce kelime daÄŸarcÄ±ÄŸÄ±nÄ±zÄ± geliÅŸtirin.">
    <link rel="stylesheet" href="css/style.css?v=4">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="app-container">


        <main id="app-content">

            <!-- LANDING VIEW -->
            <div id="view-landing" class="view active">
                <div class="landing-container">
                    <div class="landing-logo">
                        <span class="logo-icon-lg">ğŸ”¥</span>
                        <h1>Ä°hsans<span class="highlight">Gate</span></h1>
                        <p class="subtitle">Kelime avÄ±na hazÄ±r mÄ±sÄ±n?</p>
                    </div>

                    <div class="landing-form">
                        <!-- Login Choice Buttons -->
                        <div id="login-choices" class="login-choices">
                            <button class="btn btn-primary btn-large" onclick="app.showUserLogin()">
                                ğŸ‘¤ KullanÄ±cÄ± GiriÅŸi
                            </button>
                            <button class="btn btn-secondary btn-large" style="margin-top: 1rem;"
                                onclick="app.checkAdminAuth()">
                                ğŸ›¡ï¸ YÃ¶netici GiriÅŸi
                            </button>
                        </div>

                        <!-- User Name Input (Hidden by default, shown after User Login click) -->
                        <div id="user-login-form" class="hidden">

                            <!-- Avatar Selection -->
                            <div class="avatar-selection-container">
                                <span class="avatar-label">Profil Resmi</span>

                                <!-- Current Avatar Display -->
                                <div class="current-avatar-display">
                                    <div class="avatar-option selected large" id="current-avatar-preview">
                                        <img src="assets/avatars/avatar_1.png" alt="Avatar">
                                    </div>
                                    <button class="btn-change-avatar" onclick="app.toggleAvatarPicker()" type="button">
                                        <span id="avatar-picker-text">DeÄŸiÅŸtir</span>
                                    </button>
                                </div>

                                <!-- All Avatars Grid (Hidden by default) -->
                                <div class="avatar-grid hidden" id="avatar-picker-grid">
                                    <div class="avatar-option selected" id="av-opt-1" onclick="app.selectAvatar(1)">
                                        <img src="assets/avatars/avatar_1.png" alt="Samurai">
                                    </div>
                                    <div class="avatar-option" id="av-opt-2" onclick="app.selectAvatar(2)">
                                        <img src="assets/avatars/avatar_2.png" alt="Robot">
                                    </div>
                                    <div class="avatar-option" id="av-opt-3" onclick="app.selectAvatar(3)">
                                        <img src="assets/avatars/avatar_3.png" alt="Astronaut">
                                    </div>
                                    <div class="avatar-option" id="av-opt-4" onclick="app.selectAvatar(4)">
                                        <img src="assets/avatars/avatar_4.png" alt="Ninja">
                                    </div>
                                    <div class="avatar-option" id="av-opt-5" onclick="app.selectAvatar(5)">
                                        <img src="assets/avatars/avatar_5.png" alt="Wolf">
                                    </div>
                                </div>
                            </div>

                            <input type="text" id="landing-player-name" class="landing-input"
                                placeholder="AdÄ±nÄ± yaz...">

                            <div style="display: flex; gap: 0.5rem; justify-content: center; margin-top: 1rem;">
                                <button class="btn btn-secondary" onclick="app.cancelUserLogin()">Geri</button>
                                <button class="btn btn-primary" onclick="app.enterDashboard()">BaÅŸla &rarr;</button>
                            </div>
                        </div>
                    </div>

                    <!-- Removed old explicit admin link, now integrated above -->
                </div>
            </div>

            <!-- DASHBOARD VIEW (Main Hub) -->
            <div id="view-dashboard" class="view hidden">
                <div class="dashboard-hub">

                    <!-- WELCOME SECTION -->
                    <div class="hub-header">
                        <!-- Dashboard Top Bar: Profile, Logo & Wallet -->
                        <div class="dashboard-top-bar"
                            style="width:100%; display:flex; justify-content:space-between; align-items:center; margin-bottom:1.5rem; border-bottom:1px solid rgba(255,255,255,0.05); padding-bottom:1rem;">

                            <!-- Profile Section (Relocated) -->
                            <div class="user-profile" style="position:relative;">
                                <div class="profile-avatar-container" onclick="app.toggleProfileMenu()"
                                    style="cursor:pointer; display:flex; align-items:center; gap:0.5rem; background:rgba(255,255,255,0.05); padding:0.4rem 0.8rem; border-radius:30px; border:1px solid var(--border-glass);">
                                    <img id="header-avatar" src="assets/avatars/avatar_1.png" class="header-avatar-img"
                                        style="width:24px; height:24px; border-radius:50%; display:none;">
                                    <span class="user-name" id="display-user-name"
                                        style="font-size:0.9rem; font-weight:600;">Misafir</span>
                                    <span style="font-size:0.7rem; opacity:0.6;">â–¼</span>
                                </div>

                                <!-- Dropdown -->
                                <div class="profile-dropdown hidden" id="profile-dropdown"
                                    style="top:120%; left:0; min-width:160px;">
                                    <button class="profile-menu-item"
                                        onclick="app.openSettings(); event.stopPropagation();">âš™ï¸ Ayarlar</button>
                                    <button class="profile-menu-item"
                                        onclick="app.logout(); event.stopPropagation();">ğŸšª Ã‡Ä±kÄ±ÅŸ</button>
                                </div>
                            </div>

                            <div class="logo">
                                <span class="logo-icon">ğŸ”¥</span>
                                <h1 style="font-size:1.5rem;">Ä°hsans<span class="highlight">Gate</span></h1>
                            </div>

                            <div class="wallet-display">
                                <span id="wallet-amount">0</span> ğŸ’
                            </div>
                        </div>

                        <div class="hub-welcome">
                            <h3>ğŸ‘‹ HoÅŸ geldin, <span id="display-user-name">Oyuncu</span></h3>
                            <p class="quote-day">"Her yeni kelime, yeni bir dÃ¼nyadÄ±r."</p>
                        </div>
                        <div class="daily-mission">
                            <span class="mission-icon">ğŸ¯</span>
                            <div class="mission-info">
                                <h4>GÃ¼nÃ¼n GÃ¶revi</h4>
                                <p>GÃ¼nlÃ¼k 500 Elmas kazan!</p>
                                <div class="mission-progress">
                                    <div class="bar" style="width: 30%"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- MAIN CONTENT GRID -->
                    <div class="dashboard-content">
                        <!-- Left: Main Modules -->
                        <div class="modules-grid">
                            <!-- Word Study -->
                            <div class="module-card hero" onclick="app.openModeSelection()">
                                <div class="icon-box">ğŸ“š</div>
                                <div class="module-info">
                                    <h4>Kelime Ã‡alÄ±ÅŸmasÄ±</h4>
                                    <p>Kelime hazineni geliÅŸtir.</p>
                                </div>
                                <div class="hover-glow"></div>
                            </div>

                            <!-- Grammar (Locked) -->
                            <div class="module-card locked">
                                <div class="icon-box">ğŸ“</div>
                                <div class="module-info">
                                    <h4>Dil Bilgisi</h4>
                                    <p>YakÄ±nda</p>
                                </div>
                                <span class="lock-icon">ğŸ”’</span>
                            </div>

                            <!-- Reading (Locked) -->
                            <div class="module-card locked">
                                <div class="icon-box">ğŸ“–</div>
                                <div class="module-info">
                                    <h4>Okuma</h4>
                                    <p>YakÄ±nda</p>
                                </div>
                                <span class="lock-icon">ğŸ”’</span>
                            </div>

                            <!-- Writing (New) -->
                            <div class="module-card" onclick="app.openWritingModes()">
                                <div class="icon-box">âœï¸</div>
                                <div class="module-info">
                                    <h4>Yazma</h4>
                                    <p>Kelime oluÅŸtur.</p>
                                </div>
                                <div class="hover-glow"></div>
                            </div>
                        </div>

                        <!-- Right / Bottom: Stats or Quick Actions -->
                        <div class="quick-stats-panel">
                            <div class="stat-item">
                                <span id="dash-fav-count" class="stat-value">â­ 0</span>
                                <span class="stat-label">Favori Kelimeler</span>
                            </div>
                            <div class="stat-item">
                                <span id="dash-high-score" class="stat-value">ğŸ† 0</span>
                                <span class="stat-label">En YÃ¼ksek Skor</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- WRITING MODES SELECTION (New) -->
            <div id="view-writing-modes" class="view hidden">
                <div class="modes-split-layout"
                    style="justify-content:center; align-items:center; flex-direction:column; padding-top:4rem;">

                    <div class="modes-header-group" style="text-align:center; margin-bottom:3rem;">
                        <button class="btn-icon back-btn-top" onclick="app.showDashboard()" title="Geri"
                            style="position:absolute; top:2rem; left:2rem;">
                            &larr;
                        </button>
                        <h2 style="font-size:2.5rem;">Yazma Modu</h2>
                        <p style="color:var(--text-secondary);">NasÄ±l Ã§alÄ±ÅŸmak istersin?</p>
                    </div>

                    <div class="mode-grid-compact"
                        style="display:flex; gap:2rem; justify-content:center; flex-wrap:wrap;">
                        <!-- Scramble Mode -->
                        <div class="mode-card compact" onclick="app.startWritingMode()"
                            style="width:280px; text-align:center; display:block; padding:2rem;">
                            <div class="mode-icon" style="font-size:3rem; margin-bottom:1rem;">ğŸ§©</div>
                            <div class="mode-info">
                                <h3>Harf BirleÅŸtirme</h3>
                                <p>KarÄ±ÅŸÄ±k harfleri dÃ¼zelt.</p>
                            </div>
                        </div>

                        <!-- Direct Input Mode -->
                        <div class="mode-card compact" onclick="app.startWritingInputMode()"
                            style="width:280px; text-align:center; display:block; padding:2rem;">
                            <div class="mode-icon" style="font-size:3rem; margin-bottom:1rem;">âŒ¨ï¸</div>
                            <div class="mode-info">
                                <h3>Kelime Yazma</h3>
                                <p>Ä°ngilizcesini kendin yaz.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- WRITING INPUT VIEW (Split Layout) -->
            <div id="view-writing-input" class="view hidden">
                <div class="split-screen-container">

                    <!-- LEFT: Task Pane -->
                    <div class="task-pane">
                        <div class="task-header">
                            <button class="btn-icon back-btn-simple" onclick="app.openWritingModes()">&larr;</button>
                            <div class="score-display">ğŸ’ <span id="writing-input-score">0</span></div>
                        </div>

                        <div class="task-content">
                            <span class="task-label">Bunu TÃ¼rkÃ§eye Ã‡evir ğŸ‘‡</span>
                            <h2 id="input-target-meaning" class="task-question-text">Loading...</h2>

                            <div class="task-input-wrapper">
                                <textarea id="writing-direct-input" class="task-textarea"
                                    placeholder="TÃ¼rkÃ§esi nedir?..." rows="2"></textarea>
                            </div>
                        </div>

                        <div class="task-actions">
                            <button id="btn-check-answer" class="btn-action check"
                                onclick="app.checkWritingInputAnswer()">KONTROL ET</button>
                            <div class="sub-actions">
                                <button class="btn-action sub" onclick="app.passWritingQuestion()">Pas GeÃ§ â­ï¸</button>
                                <button class="btn-action sub" onclick="app.giveUpWritingInput()">Pes Et ğŸ³ï¸</button>
                            </div>
                        </div>
                    </div>

                    <!-- RIGHT: AI Chat Pane -->
                    <div class="chat-pane">
                        <div class="chat-header">
                            <span class="ai-avatar">ğŸ¤–</span>
                            <div class="ai-info">
                                <span class="ai-name">AI Asistan</span>
                                <span class="ai-status">Ã‡evrimiÃ§i</span>
                            </div>
                        </div>
                        <div id="ai-chat-messages" class="chat-messages">
                            <!-- Messages will appear here -->
                            <div class="chat-bubble ai">Merhaba! Sana Ã§evirilerde yardÄ±m etmek iÃ§in buradayÄ±m.
                                BaÅŸlayalÄ±m! ğŸš€</div>
                        </div>
                    </div>

                </div>
            </div>

    </div>
    </div>

    <!-- WRITING VIEW (Scramble Mode) -->
    <div id="view-modes" class="view hidden" style="padding: 0;">
        <div class="modes-split-layout">
            <!-- LEFT COLUMN: MODES -->
            <div class="modes-column">
                <div class="modes-header-group">
                    <button class="btn-icon back-btn-top" onclick="app.showDashboard()" title="Geri">
                        &larr;
                    </button>
                    <h2>Oyun Modu</h2>
                </div>
                <p style="color:var(--text-secondary); margin-bottom:2rem">Meydan okumanÄ± seÃ§.</p>

                <div class="mode-grid-compact">
                    <div class="mode-card compact" onclick="app.showLevelMap()">
                        <div class="mode-icon">ğŸ”ï¸</div>
                        <div class="mode-info">
                            <h3>Kelime SerÃ¼veni</h3>
                            <p>100 Seviye, Artan Zorluk.</p>
                        </div>
                    </div>
                    <div class="mode-card compact" onclick="app.startGame('rush')">
                        <div class="mode-icon">âš¡</div>
                        <div class="mode-info">
                            <h3>Acele Modu</h3>
                            <p>120 sn, rekor kÄ±r.</p>
                        </div>
                    </div>
                    <div class="mode-card compact" onclick="app.startGame('favorites')">
                        <div class="mode-icon">â­</div>
                        <div class="mode-info">
                            <h3>Favoriler</h3>
                            <p>Kendi kelimelerin.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RIGHT COLUMN: LEADERBOARD -->
            <div class="leaderboard-column">
                <div class="leaderboard-card">
                    <div class="lb-header">
                        <h3>ğŸ† Liderlik Tablosu</h3>
                        <span class="badge-rush">Acele Modu</span>
                    </div>

                    <div class="table-wrapper">
                        <table class="lb-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Oyuncu</th>
                                    <th>Skor</th>
                                </tr>
                            </thead>
                            <tbody id="leaderboard-body">
                                <!-- JS Populated -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- NEW: Word List Button -->
                <button class="btn btn-secondary"
                    style="width:100%; margin-top:1rem; display:flex; justify-content:center; align-items:center; gap:0.5rem;"
                    onclick="app.showWordList()">
                    <span>ğŸ“š</span> TÃ¼m Kelimeler & Favoriler
                </button>
            </div>
        </div>
    </div>

    <!-- GAME VIEW -->
    <div id="view-game" class="view hidden">
        <div class="game-header-bar">
            <!-- Space holder if needed, or just justify-between -->
            <div></div>

            <!-- New Level Info -->
            <div id="level-info-container" class="level-info-container hidden" style="flex:1; margin:0 1rem;">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.3rem">
                    <span style="font-size:0.9rem; color:var(--text-secondary); font-weight:bold">Seviye <span
                            id="current-level-display" style="color:var(--neon-gold)">1</span></span>
                    <span id="level-progress-text" style="font-size:0.8rem; color:var(--text-secondary)">0 /
                        50</span>
                </div>
                <div class="level-progress-track">
                    <div id="level-progress-fill" class="level-progress-fill" style="width:0%"></div>
                </div>
            </div>

            <div class="live-score">Skor: <span id="current-score">0</span></div>
            <div id="game-timer" class="game-timer hidden">02:00</div>
        </div>

        <div id="game-lives" class="game-lives hidden">â¤ï¸â¤ï¸â¤ï¸</div>

        <div class="game-card">
            <div class="card-header">
                <span id="word-level" class="level-indicator">A1</span>

                <!-- Actions Container: Stacked Vertically -->
                <div style="display:flex; flex-direction:column; gap:0.5rem; align-items:center;">
                    <!-- Favorite Star -->
                    <button id="game-star-btn" class="btn-star" onclick="app.toggleGameFavorite()">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polygon
                                points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2">
                            </polygon>
                        </svg>
                    </button>

                    <!-- Speaker Button (New Position) -->
                    <button id="btn-speak" class="btn-star" onclick="app.speakCurrentWord()" title="Dinle"
                        style="font-size:1.2rem; display:flex; justify-content:center; align-items:center;">
                        ğŸ”Š
                    </button>
                </div>
            </div>

            <div class="word-display">
                <h2 id="target-word">Placeholder</h2>
            </div>

            <div id="options-container" class="options-grid">
                <!-- Options Generated by JS -->
            </div>
        </div>

        <div style="margin-top:1rem; display:flex; justify-content:space-between; align-items:center">
            <button class="btn btn-text" onclick="app.quitGame()">&larr; VazgeÃ§</button>
            <button id="btn-joker" class="btn-joker" onclick="app.useJoker()">
                <span>ğŸƒ %50</span>
                <span class="joker-cost">200 ğŸ’</span>
            </button>
        </div>
    </div>

    <!-- GAME OVER VIEW -->
    <div id="view-gameover" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>Oyun Bitti!</h3>

            <div class="final-score-text">
                Skorun
                <span id="final-score">150</span>
            </div>

            <div class="earnings-report">
                KazanÄ±lan: <span id="earned-wallet" class="highlight">+0</span> ğŸ’
            </div>

            <div id="name-input-area" class="name-input-container hidden">
                <!-- Name input is now handled globally in header or settings ideally, but keeping fallback -->
            </div>

            <div style="display:flex; gap:1rem; justify-content:center">
                <button class="btn btn-secondary" onclick="app.openModeSelection()">Mod SeÃ§imi</button>
                <button class="btn btn-primary" onclick="app.startGame()">Tekrar Oyna â†º</button>
            </div>
        </div>
    </div>

    <!-- WORD LIST VIEW -->
    <div id="view-list" class="view hidden">
        <div class="list-header">
            <div style="display:flex; align-items:center; gap:1rem; margin-bottom:1rem;">
                <button class="btn-icon back-btn-top" onclick="app.openModeSelection()" title="Geri">
                    &larr;
                </button>
                <h2 style="margin:0; font-size:1.5rem;">Kelimeler</h2>
            </div>

            <div class="search-bar">
                <input type="text" id="search-input" placeholder="Kelime ara..." onkeyup="app.filterList()">
            </div>
            <div class="filter-tabs">
                <button class="filter-tab active" id="filter-all" onclick="app.setListFilter('all')">
                    <span>ğŸ“š</span> TÃ¼mÃ¼ <span id="total-word-count"
                        style="font-size:0.8em; opacity:0.7; margin-left:4px">(0)</span>
                </button>
                <button class="filter-tab" id="filter-favs" onclick="app.setListFilter('favs')">
                    <span>â­</span> Favoriler
                </button>
            </div>

            <!-- Level Filters -->
            <div class="level-filters">
                <button class="level-chip active" onclick="app.setLevelFilter('all', this)">TÃ¼m
                    Seviyeler</button>
                <button class="level-chip" onclick="app.setLevelFilter('A1', this)">A1</button>
                <button class="level-chip" onclick="app.setLevelFilter('A2', this)">A2</button>
                <button class="level-chip" onclick="app.setLevelFilter('B1', this)">B1</button>
                <button class="level-chip" onclick="app.setLevelFilter('B2', this)">B2</button>
                <button class="level-chip" onclick="app.setLevelFilter('C1', this)">C1</button>
                <button class="level-chip" onclick="app.setLevelFilter('C2', this)">C2</button>
            </div>
        </div>
        <div id="word-list-items" class="word-list-container">
            <!-- Items JS -->
        </div>
        <div class="sticky-back">
            <button class="btn btn-primary" onclick="app.openModeSelection()">Geri DÃ¶n</button>
        </div>
    </div>

    <!-- LEVEL MAP VIEW -->
    <div id="view-level-map" class="view hidden" style="padding:0; overflow:hidden;">
        <!-- Fixed Header independent of scroll -->
        <!-- Fixed Header independent of scroll -->
        <div class="map-fixed-header" style="position:absolute; top:1rem; left:1rem; z-index:50; pointer-events:none;">
            <button class="btn-icon back-btn-top" onclick="app.openModeSelection()" title="Geri"
                style="pointer-events:auto; background:rgba(15, 23, 42, 0.6); backdrop-filter:blur(5px); border:1px solid rgba(255,255,255,0.2);">
                &larr;
            </button>
        </div>

        <!-- Scrollable Container -->
        <div class="map-scroll-area" style="overflow-y:auto; height:100%; padding-top:20px;">
            <div id="level-map-container" class="level-map-container">
                <!-- Nodes Generated by JS -->
            </div>
        </div>
    </div>

    <!-- WRITING VIEW (Scramble Mode) -->
    <div id="view-writing" class="view hidden">
        <div class="game-header-bar">
            <button class="btn-icon back-btn-top" onclick="app.showDashboard()" title="Ã‡Ä±kÄ±ÅŸ">&larr;</button>
            <div
                style="font-size:1.2rem; font-weight:bold; color:var(--text-secondary); margin-top:-10px; margin-right:20px;">
                Puan: <span id="writing-score" style="color:var(--neon-blue)">0</span></div>
        </div>

        <div class="game-card" style="justify-content:center; gap:2rem;">
            <!-- Question Area -->
            <div style="text-align:center;">
                <span style="font-size:1rem; opacity:0.7; display:block; margin-bottom:0.5rem">Bu kelimenin
                    Ä°ngilizcesi ne?</span>
                <h2 id="writing-target-meaning"
                    style="font-size:2.5rem; color:var(--accent-gold); text-shadow:0 0 10px rgba(245,158,11,0.5)">
                    Elma
                </h2>
                <button class="btn-star" onclick="app.speakCurrentWord()" title="Dinle"
                    style="font-size:1.2rem; display:inline-flex; justify-content:center; align-items:center; margin-top:0.5rem;">
                    ğŸ”Š
                </button>
            </div>

            <!-- Slots Area -->
            <div id="writing-slots"
                style="display:flex; justify-content:center; gap:0.5rem; flex-wrap:wrap; min-height:60px;">
                <!-- Generated via JS -->
            </div>

            <!-- Letters Area -->
            <div id="writing-pool"
                style="display:flex; justify-content:center; gap:0.5rem; flex-wrap:wrap; margin-top:2rem;">
                <!-- Generated via JS -->
            </div>

            <!-- Feedback Area -->
            <div id="writing-feedback" style="height:2rem; font-weight:bold; color:var(--text-primary);"></div>
        </div>

        <div style="margin-top:2rem; display:flex; justify-content:center; gap:1rem;">
            <button class="btn btn-secondary" onclick="app.clearWritingSlots()">Temizle ğŸ§¹</button>
            <button class="btn btn-primary" onclick="app.checkWritingAnswer()">Kontrol Et âœ…</button>
        </div>
    </div>

    <!-- ADMIN VIEW -->
    <div id="view-admin" class="view hidden">
        <h2 style="text-align:center; margin-bottom:2rem; color:var(--accent-gold)">YÃ¶netici Paneli</h2>

        <div class="admin-grid">
            <button class="btn btn-secondary" onclick="app.performShowAddWord()">
                <span style="font-size:2rem; display:block">ğŸ“</span>
                Kelime Ekle
            </button>

            <button class="btn btn-secondary" onclick="app.resetProgress()">
                <span style="font-size:2rem; display:block">ğŸ—‘ï¸</span>
                Ä°lerlemeyi SÄ±fÄ±rla
            </button>

            <button class="btn btn-primary" onclick="app.openModeSelection()"
                style="grid-column: 1 / -1; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; border:none; box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);">
                <span style="font-size:2rem; display:block">ğŸ®</span>
                YÃ¶netici Olarak Oyuna DÃ¶n<br><span style="font-size:0.8rem; opacity:0.9">(Kilitler AÃ§Ä±k)</span>
            </button>
        </div>

        <div style="margin-top:3rem; text-align:center">
            <button class="btn btn-text" onclick="app.showLanding()">
                &larr; Ã‡Ä±kÄ±ÅŸ Yap
            </button>
        </div>
    </div>

    <!-- ADD WORD VIEW (Admin Sub-view) -->
    <div id="view-add-word" class="view hidden">
        <h3 style="margin-bottom:1.5rem; text-align:center">Yeni Kelime Ekle (Global)</h3>

        <div class="form-group">
            <label>Ä°ngilizce Kelime</label>
            <input type="text" id="new-word-en" autocomplete="off">
        </div>

        <div class="form-group">
            <label>TÃ¼rkÃ§e KarÅŸÄ±lÄ±ÄŸÄ±</label>
            <input type="text" id="new-word-tr" autocomplete="off">
        </div>

        <div class="form-group">
            <label>Seviye</label>
            <div class="level-select">
                <button class="lvl-btn active" onclick="app.selectLevel('A1', this)">A1</button>
                <button class="lvl-btn" onclick="app.selectLevel('A2', this)">A2</button>
                <button class="lvl-btn" onclick="app.selectLevel('B1', this)">B1</button>
                <button class="lvl-btn" onclick="app.selectLevel('B2', this)">B2</button>
                <button class="lvl-btn" onclick="app.selectLevel('C1', this)">C1</button>
            </div>
        </div>

        <div style="margin-top:2rem; display:flex; gap:1rem">
            <button class="btn btn-secondary" onclick="app.showAdmin()">Ä°ptal</button>
            <button class="btn btn-primary" onclick="app.saveNewWord()">Kaydet</button>
        </div>
    </div>

    <!-- PASSWORD MODAL -->
    <div id="view-password-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <p id="password-modal-msg" style="margin-bottom:1rem">Parola:</p>
            <input type="password" id="reset-password-input" class="password-input"
                style="width:100%; padding:0.8rem; margin-bottom:1rem; background:rgba(255,255,255,0.1); border:1px solid #555; color:white; text-align:center">
            <div style="display:flex; gap:1rem; justify-content:center">
                <button class="btn btn-secondary" onclick="app.closePasswordModal()">Ä°ptal</button>
                <button class="btn btn-primary" onclick="app.submitPassword()">Onayla</button>
            </div>
        </div>
    </div>

    <!-- LOGOUT CONFIRMATION MODAL -->
    <div id="logout-confirmation-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 style="margin-bottom:1.5rem; color:var(--text-primary)">Ã‡Ä±kÄ±ÅŸ Yap</h3>
            <p style="margin-bottom:2rem; color:var(--text-secondary)">Ã‡Ä±kÄ±ÅŸ yapmak istediÄŸinizden emin misiniz?
            </p>
            <div style="display:flex; gap:1rem; justify-content:center">
                <button class="btn btn-secondary" onclick="app.closeLogoutModal()">Ä°ptal</button>
                <button class="btn btn-primary" onclick="app.confirmLogout()">Ã‡Ä±kÄ±ÅŸ Yap</button>
            </div>
        </div>
    </div>

    <!-- GAME OVER MODAL (Adventure Mode) -->
    <div id="game-over-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 style="margin-bottom:1rem; color:#ef4444; font-size:2rem">ğŸ’” Oyun Bitti</h3>
            <p style="margin-bottom:2rem; color:var(--text-secondary); font-size:1.1rem">Maalesef yandÄ±nÄ±z!</p>
            <div style="display:flex; gap:1rem; justify-content:center">
                <button class="btn btn-secondary" onclick="app.exitToLevelMap()">Ã‡Ä±kÄ±ÅŸ Yap</button>
                <button class="btn btn-primary" onclick="app.retryAdventure()">Tekrar Dene</button>
            </div>
        </div>
    </div>
    </main>
    </div>

    <!-- SETTINGS VIEW (New) -->
    <div id="view-settings" class="view hidden">
        <div class="modes-split-layout"
            style="justify-content:center; align-items:center; flex-direction:column; padding-top:4rem;">

            <div class="modes-header-group" style="text-align:center; margin-bottom:2rem;">
                <button class="btn-icon back-btn-top" onclick="app.showDashboard()" title="Geri"
                    style="position:absolute; top:2rem; left:2rem;">
                    &larr;
                </button>
                <h2 style="font-size:2.5rem;">Ayarlar</h2>
                <p style="color:var(--text-secondary);">Yapay zeka ve diÄŸer ayarlar.</p>
            </div>

            <div class="game-card" style="width:100%; max-width:600px; padding:2rem;">
                <h3 style="margin-bottom:1rem; color:var(--accent-gold);">ğŸ¤– Yapay Zeka (Gemini AI)</h3>
                <p style="margin-bottom:1rem; font-size:0.9rem; color:var(--text-secondary);">
                    Daha akÄ±llÄ± sorular ve cevap kontrolÃ¼ iÃ§in Google Gemini API AnahtarÄ±nÄ±zÄ± girin.<br>
                    <a href="https://aistudio.google.com/app/apikey" target="_blank"
                        style="color:var(--neon-blue);">Anahtar almak iÃ§in tÄ±klayÄ±n (Ãœcretsiz)</a>
                </p>

                <div class="form-group">
                    <label style="display:block; margin-bottom:0.5rem;">API AnahtarÄ± (API Key)</label>
                    <input type="password" id="settings-api-key" placeholder="AIzaSy..."
                        style="width:100%; padding:0.8rem; background:rgba(0,0,0,0.3); border:1px solid var(--border-glass); color:white;">
                </div>

                <div style="margin-top:1.5rem; display:flex; gap:1rem; justify-content:flex-end;">
                    <button class="btn btn-secondary" onclick="app.testGeminiConnection()">Test Et âš¡</button>
                    <button class="btn btn-primary" onclick="app.saveSettings()">Kaydet ğŸ’¾</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <!-- Add Firebase products that you want to use -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics-compat.js"></script>

    <script src="js/words.js?v=16"></script>
    <script src="js/app.js?v=7"></script>
</body>

</html>